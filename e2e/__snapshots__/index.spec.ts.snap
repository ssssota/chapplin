// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`npm run build > should correctly build widget 1`] = `
"<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>todo app</title>
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Xe={Stringify:1},T=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},Je=/[&<>'"]/,Ye=async(e,t)=>{let r="";t||=[];const a=await Promise.all(e);for(let n=a.length-1;r+=a[n],n--,!(n<0);n--){let i=a[n];typeof i=="object"&&t.push(...i.callbacks||[]);const s=i.isEscaped;if(i=await(typeof i=="object"?i.toString():i),typeof i=="object"&&t.push(...i.callbacks||[]),i.isEscaped??s)r+=i;else{const c=[r];k(i,c),r=c[0]}}return T(r,t)},k=(e,t)=>{const r=e.search(Je);if(r===-1){t[0]+=e;return}let a,n,i=0;for(n=r;n<e.length;n++){switch(e.charCodeAt(n)){case 34:a="&quot;";break;case 39:a="&#39;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}t[0]+=e.substring(i,n)+a,i=n+1}t[0]+=e.substring(i,n)},Qe=e=>{const t=e.callbacks;if(!t?.length)return e;const r=[e],a={};return t.forEach(n=>n({phase:Xe.Stringify,buffer:r,context:a})),r[0]},ae=Symbol("RENDERER"),Q=Symbol("ERROR_HANDLER"),d=Symbol("STASH"),Pe=Symbol("INTERNAL"),et=Symbol("MEMO"),q=Symbol("PERMALINK"),de=e=>(e[Pe]=!0,e),Me=e=>({value:t,children:r})=>{if(!r)return;const a={children:[{tag:de(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?a.children.push(...r.flat()):a.children.push(r),a.children.push({tag:de(()=>{e.pop()}),props:{}});const n={tag:"",props:a,type:""};return n[Q]=i=>{throw e.pop(),i},n},Le=e=>{const t=[e],r=Me(t);return r.values=t,r.Provider=r,w.push(r),r},w=[],tt=e=>{const t=[e],r=a=>{t.push(a.value);let n;try{n=a.children?(Array.isArray(a.children)?new pt("",{},a.children):a.children).toString():""}finally{t.pop()}return n instanceof Promise?n.then(i=>T(i,i.callbacks)):T(n)};return r.values=t,r.Provider=r,r[ae]=Me(t),w.push(r),r},L=e=>e.values.at(-1),H={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},ee={},j="data-precedence",R=e=>Array.isArray(e)?e:[e],pe=new WeakMap,he=(e,t,r,a)=>({buffer:n,context:i})=>{if(!n)return;const s=pe.get(i)||{};pe.set(i,s);const c=s[e]||=[];let u=!1;const o=H[e];if(o.length>0){e:for(const[,f]of c)for(const l of o)if((f?.[l]??null)===r?.[l]){u=!0;break e}}if(u?n[0]=n[0].replaceAll(t,""):o.length>0?c.push([t,r,a]):c.unshift([t,r,a]),n[0].indexOf("</head>")!==-1){let f;if(a===void 0)f=c.map(([l])=>l);else{const l=[];f=c.map(([v,,h])=>{let y=l.indexOf(h);return y===-1&&(l.push(h),y=l.length-1),[v,y]}).sort((v,h)=>v[1]-h[1]).map(([v])=>v)}f.forEach(l=>{n[0]=n[0].replaceAll(l,"")}),n[0]=n[0].replace(/(?=<\\/head>)/,f.join(""))}},D=(e,t,r)=>T(new S(e,r,R(t??[])).toString()),_=(e,t,r,a)=>{if("itemProp"in r)return D(e,t,r);let{precedence:n,blocking:i,...s}=r;n=a?n??"":void 0,a&&(s[j]=n);const c=new S(e,s,R(t||[])).toString();return c instanceof Promise?c.then(u=>T(c,[...u.callbacks||[],he(e,u,s,n)])):T(c,[he(e,c,s,n)])},rt=({children:e,...t})=>{const r=ie();if(r){const a=L(r);if(a==="svg"||a==="head")return new S("title",t,R(e??[]))}return _("title",e,t,!1)},nt=({children:e,...t})=>{const r=ie();return["src","async"].some(a=>!t[a])||r&&L(r)==="head"?D("script",e,t):_("script",e,t,!1)},at=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,_("style",e,t,!0)):D("style",e,t),it=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?D("link",e,t):_("link",e,t,"precedence"in t),st=({children:e,...t})=>{const r=ie();return r&&L(r)==="head"?D("meta",e,t):_("meta",e,t,!1)},Ne=(e,{children:t,...r})=>new S(e,r,R(t??[])),lt=e=>(typeof e.action=="function"&&(e.action=q in e.action?e.action[q]:void 0),Ne("form",e)),Oe=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=q in t.formAction?t.formAction[q]:void 0),Ne(e,t)),ot=e=>Oe("input",e),ct=e=>Oe("button",e);const V=Object.freeze(Object.defineProperty({__proto__:null,button:ct,form:lt,input:ot,link:it,meta:st,script:nt,style:at,title:rt},Symbol.toStringTag,{value:"Module"}));var ft=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),W=e=>ft.get(e)||e,xe=(e,t)=>{for(const[r,a]of Object.entries(e)){const n=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,i=>\`-\${i.toLowerCase()}\`);t(n,a==null?null:typeof a=="number"?n.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?\`\${a}\`:\`\${a}px\`:a)}},x=void 0,ie=()=>x,ut=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,vt=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],dt=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],se=(e,t)=>{for(let r=0,a=e.length;r<a;r++){const n=e[r];if(typeof n=="string")k(n,t);else{if(typeof n=="boolean"||n===null||n===void 0)continue;n instanceof S?n.toStringToBuffer(t):typeof n=="number"||n.isEscaped?t[0]+=n:n instanceof Promise?t.unshift("",n):se(n,t)}}},S=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(e,t,r){this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){const e=[""];this.localContexts?.forEach(([t,r])=>{t.values.push(r)});try{this.toStringToBuffer(e)}finally{this.localContexts?.forEach(([t])=>{t.values.pop()})}return e.length===1?"callbacks"in e?Qe(T(e[0],e.callbacks)).toString():e[0]:Ye(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:a}=this;e[0]+=\`<\${t}\`;const n=x&&L(x)==="svg"?i=>ut(W(i)):i=>W(i);for(let[i,s]of Object.entries(r))if(i=n(i),i!=="children"){if(i==="style"&&typeof s=="object"){let c="";xe(s,(u,o)=>{o!=null&&(c+=\`\${c?";":""}\${u}:\${o}\`)}),e[0]+=' style="',k(c,e),e[0]+='"'}else if(typeof s=="string")e[0]+=\` \${i}="\`,k(s,e),e[0]+='"';else if(s!=null)if(typeof s=="number"||s.isEscaped)e[0]+=\` \${i}="\${s}"\`;else if(typeof s=="boolean"&&dt.includes(i))s&&(e[0]+=\` \${i}=""\`);else if(i==="dangerouslySetInnerHTML"){if(a.length>0)throw new Error("Can only set one of \`children\` or \`props.dangerouslySetInnerHTML\`.");a=[T(s.__html)]}else if(s instanceof Promise)e[0]+=\` \${i}="\`,e.unshift('"',s);else if(typeof s=="function"){if(!i.startsWith("on")&&i!=="ref")throw new Error(\`Invalid prop '\${i}' of type 'function' supplied to '\${t}'.\`)}else e[0]+=\` \${i}="\`,k(s.toString(),e),e[0]+='"'}if(vt.includes(t)&&a.length===0){e[0]+="/>";return}e[0]+=">",se(a,e),e[0]+=\`</\${t}>\`}},Z=class extends S{toStringToBuffer(e){const{children:t}=this,r={...this.props};t.length&&(r.children=t.length===1?t[0]:t);const a=this.tag.call(null,r);if(!(typeof a=="boolean"||a==null))if(a instanceof Promise)if(w.length===0)e.unshift("",a);else{const n=w.map(i=>[i,i.values.at(-1)]);e.unshift("",a.then(i=>(i instanceof S&&(i.localContexts=n),i)))}else a instanceof S?a.toStringToBuffer(e):typeof a=="number"||a.isEscaped?(e[0]+=a,a.callbacks&&(e.callbacks||=[],e.callbacks.push(...a.callbacks))):k(a,e)}},pt=class extends S{toStringToBuffer(e){se(this.children,e)}},me=!1,X=(e,t,r)=>{if(!me){for(const a in ee)V[a][ae]=ee[a];me=!0}return typeof e=="function"?new Z(e,t,r):V[e]?new Z(V[e],t,r):e==="svg"||e==="head"?(x||=tt(""),new S(e,t,[new Z(x,{value:e},r)])):new S(e,t,r)};function N(e,t,r){let a;if(!t||!("children"in t))a=X(e,t,[]);else{const n=t.children;a=Array.isArray(n)?X(e,t,n):X(e,t,[n])}return a.key=r,a}var $="_hp",ht={Change:"Input",DoubleClick:"DblClick"},mt={svg:"2000/svg",math:"1998/Math/MathML"},P=[],te=new WeakMap,M=void 0,gt=()=>M,C=e=>"t"in e,J={onClick:["click",!1]},ge=e=>{if(!e.startsWith("on"))return;if(J[e])return J[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,a]=t;return J[e]=[(ht[r]||r).toLowerCase(),!!a]}},ye=(e,t)=>M&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,yt=(e,t,r)=>{t||={};for(let a in t){const n=t[a];if(a!=="children"&&(!r||r[a]!==n)){a=W(a);const i=ge(a);if(i){if(r?.[a]!==n&&(r&&e.removeEventListener(i[0],r[a],i[1]),n!=null)){if(typeof n!="function")throw new Error(\`Event handler for "\${a}" is not a function\`);e.addEventListener(i[0],n,i[1])}}else if(a==="dangerouslySetInnerHTML"&&n)e.innerHTML=n.__html;else if(a==="ref"){let s;typeof n=="function"?s=n(e)||(()=>n(null)):n&&"current"in n&&(n.current=e,s=()=>n.current=null),te.set(e,s)}else if(a==="style"){const s=e.style;typeof n=="string"?s.cssText=n:(s.cssText="",n!=null&&xe(n,s.setProperty.bind(s)))}else{if(a==="value"){const c=e.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(e.value=n==null||n===!1?null:n,c==="TEXTAREA"){e.textContent=n;continue}else if(c==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(a==="checked"&&e.nodeName==="INPUT"||a==="selected"&&e.nodeName==="OPTION")&&(e[a]=n);const s=ye(e,a);n==null||n===!1?e.removeAttribute(s):n===!0?e.setAttribute(s,""):typeof n=="string"||typeof n=="number"?e.setAttribute(s,n):e.setAttribute(s,n.toString())}}}if(r)for(let a in r){const n=r[a];if(a!=="children"&&!(a in t)){a=W(a);const i=ge(a);i?e.removeEventListener(i[0],n,i[1]):a==="ref"?te.get(e)?.():e.removeAttribute(ye(e,a))}}},Et=(e,t)=>{t[d][0]=0,P.push([e,t]);const r=t.tag[ae]||t.tag,a=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,a)]}finally{P.pop()}},$e=(e,t,r,a,n)=>{e.vR?.length&&(a.push(...e.vR),delete e.vR),typeof e.tag=="function"&&e[d][1][oe]?.forEach(i=>n.push(i)),e.vC.forEach(i=>{if(C(i))r.push(i);else if(typeof i.tag=="function"||i.tag===""){i.c=t;const s=r.length;if($e(i,t,r,a,n),i.s){for(let c=s;c<r.length;c++)r[c].s=!0;i.s=!1}}else r.push(i),i.vR?.length&&(a.push(...i.vR),delete i.vR)})},St=e=>{for(;;e=e.tag===$||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==$&&e.e)return e.e}},Re=e=>{C(e)||(e[d]?.[1][oe]?.forEach(t=>t[2]?.()),te.get(e.e)?.(),e.p===2&&e.vC?.forEach(t=>t.p=2),e.vC?.forEach(Re)),e.p||(e.e?.remove(),delete e.e),typeof e.tag=="function"&&(O.delete(e),B.delete(e),delete e[d][3],e.a=!0)},le=(e,t,r)=>{e.c=t,De(e,t,r)},Ee=(e,t)=>{if(t){for(let r=0,a=e.length;r<a;r++)if(e[r]===t)return r}},Se=Symbol(),De=(e,t,r)=>{const a=[],n=[],i=[];$e(e,t,a,n,i),n.forEach(Re);const s=r?void 0:t.childNodes;let c,u=null;if(r)c=-1;else if(!s.length)c=0;else{const o=Ee(s,St(e.nN));o!==void 0?(u=s[o],c=o):c=Ee(s,a.find(f=>f.tag!==$&&f.e)?.e)??-1,c===-1&&(r=!0)}for(let o=0,f=a.length;o<f;o++,c++){const l=a[o];let v;if(l.s&&l.e)v=l.e,l.s=!1;else{const h=r||!l.e;C(l)?(l.e&&l.d&&(l.e.textContent=l.t),l.d=!1,v=l.e||=document.createTextNode(l.t)):(v=l.e||=l.n?document.createElementNS(l.n,l.tag):document.createElement(l.tag),yt(v,l.props,l.pP),De(l,v,h))}l.tag===$?c--:r?v.parentNode||t.appendChild(v):s[c]!==v&&s[c-1]!==v&&(s[c+1]===v?t.appendChild(s[c]):t.insertBefore(v,u||s[c]||null))}if(e.pP&&delete e.pP,i.length){const o=[],f=[];i.forEach(([,l,,v,h])=>{l&&o.push(l),v&&f.push(v),h?.()}),o.forEach(l=>l()),f.length&&requestAnimationFrame(()=>{f.forEach(l=>l())})}},At=(e,t)=>!!(e&&e.length===t.length&&e.every((r,a)=>r[1]===t[a][1])),B=new WeakMap,K=(e,t,r)=>{const a=!r&&t.pC;r&&(t.pC||=t.vC);let n;try{r||=typeof t.tag=="function"?Et(e,t):R(t.props.children),r[0]?.tag===""&&r[0][Q]&&(n=r[0][Q],e[5].push([e,n,t]));const i=a?[...t.pC]:t.vC?[...t.vC]:void 0,s=[];let c;for(let u=0;u<r.length;u++){Array.isArray(r[u])&&r.splice(u,1,...r[u].flat());let o=_e(r[u]);if(o){typeof o.tag=="function"&&!o.tag[Pe]&&(w.length>0&&(o[d][2]=w.map(l=>[l,l.values.at(-1)])),e[5]?.length&&(o[d][3]=e[5].at(-1)));let f;if(i&&i.length){const l=i.findIndex(C(o)?v=>C(v):o.key!==void 0?v=>v.key===o.key&&v.tag===o.tag:v=>v.tag===o.tag);l!==-1&&(f=i[l],i.splice(l,1))}if(f)if(C(o))f.t!==o.t&&(f.t=o.t,f.d=!0),o=f;else{const l=f.pP=f.props;if(f.props=o.props,f.f||=o.f||t.f,typeof o.tag=="function"){const v=f[d][2];f[d][2]=o[d][2]||[],f[d][3]=o[d][3],!f.f&&((f.o||f)===o.o||f.tag[et]?.(l,f.props))&&At(v,f[d][2])&&(f.s=!0)}o=f}else if(!C(o)&&M){const l=L(M);l&&(o.n=l)}if(!C(o)&&!o.s&&(K(e,o),delete o.f),s.push(o),c&&!c.s&&!o.s)for(let l=c;l&&!C(l);l=l.vC?.at(-1))l.nN=o;c=o}}t.vR=a?[...t.vC,...i||[]]:i||[],t.vC=s,a&&delete t.pC}catch(i){if(t.f=!0,i===Se){if(n)return;throw i}const[s,c,u]=t[d]?.[3]||[];if(c){const o=()=>F([0,!1,e[2]],u),f=B.get(u)||[];f.push(o),B.set(u,f);const l=c(i,()=>{const v=B.get(u);if(v){const h=v.indexOf(o);if(h!==-1)return v.splice(h,1),o()}});if(l){if(e[0]===1)e[1]=!0;else if(K(e,u,[l]),(c.length===1||e!==s)&&u.c){le(u,u.c,!1);return}throw Se}}throw i}finally{n&&e[5].pop()}},_e=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[d]=[0,[]];else{const t=mt[e.tag];t&&(M||=Le(""),e.props.children=[{tag:M,props:{value:e.n=\`http://www.w3.org/\${t}\`,children:e.props.children}}])}return e}},Ie=(e,t,r)=>{e.c===t&&(e.c=r,e.vC.forEach(a=>Ie(a,t,r)))},Ae=(e,t)=>{t[d][2]?.forEach(([r,a])=>{r.values.push(a)});try{K(e,t,void 0)}catch{return}if(t.a){delete t.a;return}t[d][2]?.forEach(([r])=>{r.values.pop()}),(e[0]!==1||!e[1])&&le(t,t.c,!1)},O=new WeakMap,be=[],F=async(e,t)=>{e[5]||=[];const r=O.get(t);r&&r[0](void 0);let a;const n=new Promise(i=>a=i);if(O.set(t,[a,()=>{e[2]?e[2](e,t,i=>{Ae(i,t)}).then(()=>a(t)):(Ae(e,t),a(t))}]),be.length)be.at(-1).add(t);else{await Promise.resolve();const i=O.get(t);i&&(O.delete(t),i[1]())}return n},bt=(e,t)=>{const r=[];r[5]=[],r[4]=!0,K(r,e,void 0),r[4]=!1;const a=document.createDocumentFragment();le(e,a,!0),Ie(e,a,t),t.replaceChildren(a)},Ct=(e,t)=>{bt(_e({tag:"",props:{children:e}}),t)},Tt=(e,t,r)=>({tag:$,props:{children:e},key:r,e:t,p:1}),kt=0,oe=1,wt=2,Pt=3,Y=new WeakMap,ce=(e,t)=>!e||!t||e.length!==t.length||t.some((r,a)=>r!==e[a]),Mt=void 0,Ce=[],He=e=>{const t=()=>typeof e=="function"?e():e,r=P.at(-1);if(!r)return[t(),()=>{}];const[,a]=r,n=a[d][1][kt]||=[],i=a[d][0]++;return n[i]||=[t(),s=>{const c=Mt,u=n[i];if(typeof s=="function"&&(s=s(u[0])),!Object.is(s,u[0]))if(u[0]=s,Ce.length){const[o,f]=Ce.at(-1);Promise.all([o===3?a:F([o,!1,c],a),f]).then(([l])=>{if(!l||!(o===2||o===3))return;const v=l.vC;requestAnimationFrame(()=>{setTimeout(()=>{v===l.vC&&F([o===3?1:0,!1,c],l)})})})}else F([0,!1,c],a)}]},Lt=(e,t,r)=>{const a=P.at(-1);if(!a)return;const[,n]=a,i=n[d][1][oe]||=[],s=n[d][0]++,[c,,u]=i[s]||=[];if(ce(c,r)){u&&u();const o=()=>{f[e]=void 0,f[2]=t()},f=[r,void 0,void 0,void 0,void 0];f[e]=o,i[s]=f}},Nt=(e,t)=>Lt(3,e,t),fe=(e,t)=>{const r=P.at(-1);if(!r)return e;const[,a]=r,n=a[d][1][wt]||=[],i=a[d][0]++,s=n[i];return ce(s?.[1],t)?n[i]=[e,t]:e=n[i][0],e},Ot=e=>{const t=Y.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>Y.set(e,[r]),r=>Y.set(e,[void 0,r])),e},xt=(e,t)=>{const r=P.at(-1);if(!r)return e();const[,a]=r,n=a[d][1][Pt]||=[],i=a[d][0]++,s=n[i];return ce(s?.[1],t)&&(n[i]=[e(),t]),n[i][0]},$t=Le({pending:!1,data:null,method:null,action:null}),Te=new Set,Rt=e=>{Te.add(e),e.finally(()=>Te.delete(e))},Dt=()=>{re=Object.create(null),ne=Object.create(null)},U=(e,t)=>xt(()=>r=>{let a;e&&(typeof e=="function"?a=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,a=()=>{e.current=null}));const n=t(r);return()=>{n?.(),a?.()}},[e]),re=Object.create(null),ne=Object.create(null),I=(e,t,r,a,n)=>{if(t?.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const i=document.head;let{onLoad:s,onError:c,precedence:u,blocking:o,...f}=t,l=null,v=!1;const h=H[e];let y;if(h.length>0){const m=i.querySelectorAll(e);e:for(const g of m)for(const p of H[e])if(g.getAttribute(p)===t[p]){l=g;break e}if(!l){const g=h.reduce((p,E)=>t[E]===void 0?p:\`\${p}-\${E}-\${t[E]}\`,e);v=!ne[g],l=ne[g]||=(()=>{const p=document.createElement(e);for(const E of h)t[E]!==void 0&&p.setAttribute(E,t[E]),t.rel&&p.setAttribute("rel",t.rel);return p})()}}else y=i.querySelectorAll(e);u=a?u??"":void 0,a&&(f[j]=u);const ue=fe(m=>{if(h.length>0){let g=!1;for(const p of i.querySelectorAll(e)){if(g&&p.getAttribute(j)!==u){i.insertBefore(m,p);return}p.getAttribute(j)===u&&(g=!0)}i.appendChild(m)}else if(y){let g=!1;for(const p of y)if(p===m){g=!0;break}g||i.insertBefore(m,i.contains(y[0])?y[0]:i.querySelector(e)),y=void 0}},[u]),ve=U(t.ref,m=>{const g=h[0];if(r===2&&(m.innerHTML=""),(v||y)&&ue(m),!c&&!s)return;let p=re[m.getAttribute(g)]||=new Promise((E,G)=>{m.addEventListener("load",E),m.addEventListener("error",G)});s&&(p=p.then(s)),c&&(p=p.catch(c)),p.catch(()=>{})});if(n&&o==="render"){const m=H[e][0];if(t[m]){const g=t[m],p=re[g]||=new Promise((E,G)=>{ue(l),l.addEventListener("load",E),l.addEventListener("error",G)});Ot(p)}}const z={tag:e,type:e,props:{...f,ref:ve},ref:ve};return z.p=r,l&&(z.e=l),Tt(z,i)},je=e=>{const t=gt();return(t&&L(t))?.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:I("title",e,void 0,!1,!1)},Be=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:I("script",e,1,!1,!0),Fe=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,I("style",e,2,!0,!0)),qe=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:I("link",e,1,"precedence"in e,!0),We=e=>I("meta",e,void 0,!1,!1),Ke=Symbol(),Ue=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[a,n]=He([null,!1]),i=fe(async o=>{const f=o.isTrusted?t:o.detail[Ke];if(typeof f!="function")return;o.preventDefault();const l=new FormData(o.target);n([l,!0]);const v=f(l);v instanceof Promise&&(Rt(v),await v),n([null,!0])},[]),s=U(e.ref,o=>(o.addEventListener("submit",i),()=>{o.removeEventListener("submit",i)})),[c,u]=a;return a[1]=!1,{tag:$t,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?t:null},children:{tag:"form",props:{...r,ref:s},type:"form",ref:s}},f:u}},ze=(e,{formAction:t,...r})=>{if(typeof t=="function"){const a=fe(n=>{n.preventDefault(),n.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Ke]:t}}))},[]);r.ref=U(r.ref,n=>(n.addEventListener("click",a),()=>{n.removeEventListener("click",a)}))}return{tag:e,props:r,type:e,ref:r.ref}},Ge=e=>ze("input",e),Ve=e=>ze("button",e);Object.assign(ee,{title:je,script:Be,style:Fe,link:qe,meta:We,form:Ue,input:Ge,button:Ve});const ke=Object.freeze(Object.defineProperty({__proto__:null,button:Ve,clearCache:Dt,composeRef:U,form:Ue,input:Ge,link:qe,meta:We,script:Be,style:Fe,title:je},Symbol.toStringTag,{value:"Module"}));var _t=(e,t,r)=>(typeof e=="string"&&ke[e]&&(e=ke[e]),{tag:e,type:e,props:t,key:r,ref:t.ref}),Ze=(e,t,...r)=>{const a=t?{...t}:{};r.length&&(a.children=r.length===1?r[0]:r);let n;return"key"in a&&(n=a.key,delete a.key),_t(e,a,n)};const we="openai:set_globals";function It(e){const t=new Set,r=()=>{for(const n of t)n()};function a(n){return t.size===0&&window.addEventListener(we,r,{passive:!0}),t.add(n),()=>{t.delete(n),t.size===0&&window.removeEventListener(we,r)}}return{useToolInput:A(a,n=>n.toolInput,e),useToolOutput:A(a,n=>n.toolOutput,e),useToolResponseMetadata:A(a,n=>n.toolResponseMetadata,e),useWidgetState:A(a,n=>n.widgetState,e),useTheme:A(a,n=>n.theme,e),useUserAgent:A(a,n=>n.userAgent,e),useLocale:A(a,n=>n.locale,e),useMaxHeight:A(a,n=>n.maxHeight,e),useDisplayMode:A(a,n=>n.displayMode,e),useSafeArea:A(a,n=>n.safeArea,e)}}function A(e,t,r){return a=>{const[n,i]=r.useState(t(window.openai??{}));return r.useEffect(()=>e(()=>{i(s=>{const c=t(window.openai??{});return Object.is(s,c)?s:(a?.(c),c)})}),[]),n}}const b=It({useState:He,useEffect:Nt});function Ht(e,t,r,a){if(!a)return;const n=document.getElementById("app");n&&Ct(Ze(jt,{app:a.app}),n)}function jt(e){return Ze(e.app,{displayMode:b.useDisplayMode(),theme:b.useTheme(),userAgent:b.useUserAgent(),locale:b.useLocale(),maxHeight:b.useMaxHeight(),safeArea:b.useSafeArea(),toolInput:b.useToolInput(),toolOutput:b.useToolOutput(),toolResponseMetadata:b.useToolResponseMetadata(),widgetState:b.useWidgetState()})}Ht(0,0,0,{app:({toolOutput:e})=>N("div",{children:[N("h1",{children:"GET Tool Example"}),N("p",{children:["Status: ",e?.todos.length," todos remaining."]}),N("ul",{children:e?.todos.map(t=>N("li",{children:[t.title," - ",t.completed?"Completed":"Pending"]},t.id))})]})});</script>
</head>
<body>
  <div id="app"></div>
</body>
</html>
"
`;

exports[`npm run dev > should respond to / 1`] = `
"<!DOCTYPE html>
<html lang="en">
<head>
  <script type="module" src="/@vite/client"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>todo app</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/__virtual-chapplin"></script>
</body>
</html>
"
`;

exports[`npm run dev > should respond to /__virtual-chapplin 1`] = `
"
const container = document.getElementById('app');
const ul = document.createElement('ul');
const tools = ["/tools/get.tsx"];
for (const toolPath of tools) {
  const li = document.createElement('li');
  const a = document.createElement('a');
  a.href = toolPath;
  a.innerText = toolPath;
  li.appendChild(a);
  ul.appendChild(li);
}
container.appendChild(ul);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fdmlydHVhbC1jaGFwcGxpbiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKTtcbmNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbmNvbnN0IHRvb2xzID0gW1wiL3Rvb2xzL2dldC50c3hcIl07XG5mb3IgKGNvbnN0IHRvb2xQYXRoIG9mIHRvb2xzKSB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgYS5ocmVmID0gdG9vbFBhdGg7XG4gIGEuaW5uZXJUZXh0ID0gdG9vbFBhdGg7XG4gIGxpLmFwcGVuZENoaWxkKGEpO1xuICB1bC5hcHBlbmRDaGlsZChsaSk7XG59XG5jb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN6QyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRO0FBQ25CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRO0FBQ3hCLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztBQUNuQixDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUM7QUFDcEI7QUFDQSxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQzsifQ=="
`;

exports[`npm run dev > should respond to /src/tools/get.tsx 1`] = `
"import { jsxDEV } from "/node_modules/.vite/deps/hono_jsx_jsx-dev-runtime.js?v=HASH";
import { defineTool } from "/@fs/PATH/chapplin/packages/chapplin/dist/tool-hono.js";
import z from "/node_modules/.vite/deps/zod.js?v=HASH";
const todos = [
  { id: 1, title: "Buy groceries", completed: false },
  { id: 2, title: "Walk the dog", completed: true },
  { id: 3, title: "Read a book", completed: false }
];
export default defineTool(
  "get",
  {
    inputSchema: {},
    outputSchema: {
      todos: z.array(
        z.object({
          id: z.number(),
          title: z.string(),
          completed: z.boolean()
        })
      )
    }
  },
  async () => {
    return {
      content: [
        {
          type: "text",
          text: \`\${todos.length} todos remaining.\`
        }
      ],
      structuredContent: {
        todos
      }
    };
  },
  {
    app: ({ toolOutput }) => /* @__PURE__ */ jsxDEV("div", { children: [
      /* @__PURE__ */ jsxDEV("h1", { children: "GET Tool Example" }, void 0, false, {
        fileName: "FILE",
        lineNumber: 42,
        columnNumber: 5
      }, this),
      /* @__PURE__ */ jsxDEV("p", { children: [
        "Status: ",
        toolOutput?.todos.length,
        " todos remaining."
      ] }, void 0, true, {
        fileName: "FILE",
        lineNumber: 43,
        columnNumber: 5
      }, this),
      /* @__PURE__ */ jsxDEV("ul", { children: toolOutput?.todos.map((todo) => /* @__PURE__ */ jsxDEV("li", { children: [
        todo.title,
        " - ",
        todo.completed ? "Completed" : "Pending"
      ] }, todo.id, true, {
        fileName: "FILE",
        lineNumber: 46,
        columnNumber: 7
      }, this)) }, void 0, false, {
        fileName: "FILE",
        lineNumber: 44,
        columnNumber: 5
      }, this)
    ] }, void 0, true, {
      fileName: "FILE",
      lineNumber: 41,
      columnNumber: 4
    }, this)
  }
);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lVG9vbCB9IGZyb20gXCJjaGFwcGxpbi90b29sXCI7XG5pbXBvcnQgeiBmcm9tIFwiem9kXCI7XG5cbi8vIEV4YW1wbGUgVVJMIHRvIGZldGNoIGRhdGEgZnJvbVxuY29uc3QgdG9kb3MgPSBbXG5cdHsgaWQ6IDEsIHRpdGxlOiBcIkJ1eSBncm9jZXJpZXNcIiwgY29tcGxldGVkOiBmYWxzZSB9LFxuXHR7IGlkOiAyLCB0aXRsZTogXCJXYWxrIHRoZSBkb2dcIiwgY29tcGxldGVkOiB0cnVlIH0sXG5cdHsgaWQ6IDMsIHRpdGxlOiBcIlJlYWQgYSBib29rXCIsIGNvbXBsZXRlZDogZmFsc2UgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZVRvb2woXG5cdFwiZ2V0XCIsXG5cdHtcblx0XHRpbnB1dFNjaGVtYToge30sXG5cdFx0b3V0cHV0U2NoZW1hOiB7XG5cdFx0XHR0b2Rvczogei5hcnJheShcblx0XHRcdFx0ei5vYmplY3Qoe1xuXHRcdFx0XHRcdGlkOiB6Lm51bWJlcigpLFxuXHRcdFx0XHRcdHRpdGxlOiB6LnN0cmluZygpLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogei5ib29sZWFuKCksXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHR9LFxuXHR9LFxuXHRhc3luYyAoKSA9PiB7XG5cdFx0Ly8gU2ltdWxhdGUgZmV0Y2hpbmcgZGF0YSBmcm9tIGFuIGV4dGVybmFsIHNvdXJjZVxuXHRcdHJldHVybiB7XG5cdFx0XHRjb250ZW50OiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHR0ZXh0OiBgJHt0b2Rvcy5sZW5ndGh9IHRvZG9zIHJlbWFpbmluZy5gLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHN0cnVjdHVyZWRDb250ZW50OiB7XG5cdFx0XHRcdHRvZG9zOiB0b2Rvcyxcblx0XHRcdH0sXG5cdFx0fTtcblx0fSxcblx0e1xuXHRcdGFwcDogKHsgdG9vbE91dHB1dCB9KSA9PiAoXG5cdFx0XHQ8ZGl2PlxuXHRcdFx0XHQ8aDE+R0VUIFRvb2wgRXhhbXBsZTwvaDE+XG5cdFx0XHRcdDxwPlN0YXR1czoge3Rvb2xPdXRwdXQ/LnRvZG9zLmxlbmd0aH0gdG9kb3MgcmVtYWluaW5nLjwvcD5cblx0XHRcdFx0PHVsPlxuXHRcdFx0XHRcdHt0b29sT3V0cHV0Py50b2Rvcy5tYXAoKHRvZG8pID0+IChcblx0XHRcdFx0XHRcdDxsaSBrZXk9e3RvZG8uaWR9PlxuXHRcdFx0XHRcdFx0XHR7dG9kby50aXRsZX0gLSB7dG9kby5jb21wbGV0ZWQgPyBcIkNvbXBsZXRlZFwiIDogXCJQZW5kaW5nXCJ9XG5cdFx0XHRcdFx0XHQ8L2xpPlxuXHRcdFx0XHRcdCkpfVxuXHRcdFx0XHQ8L3VsPlxuXHRcdFx0PC9kaXY+XG5cdFx0KSxcblx0fSxcbik7XG4iXSwibWFwcGluZ3MiOiJBQXlDSTtBQXpDSixTQUFTLGtCQUFrQjtBQUMzQixPQUFPLE9BQU87QUFHZCxNQUFNLFFBQVE7QUFBQSxFQUNiLEVBQUUsSUFBSSxHQUFHLE9BQU8saUJBQWlCLFdBQVcsTUFBTTtBQUFBLEVBQ2xELEVBQUUsSUFBSSxHQUFHLE9BQU8sZ0JBQWdCLFdBQVcsS0FBSztBQUFBLEVBQ2hELEVBQUUsSUFBSSxHQUFHLE9BQU8sZUFBZSxXQUFXLE1BQU07QUFDakQ7QUFFQSxlQUFlO0FBQUEsRUFDZDtBQUFBLEVBQ0E7QUFBQSxJQUNDLGFBQWEsQ0FBQztBQUFBLElBQ2QsY0FBYztBQUFBLE1BQ2IsT0FBTyxFQUFFO0FBQUEsUUFDUixFQUFFLE9BQU87QUFBQSxVQUNSLElBQUksRUFBRSxPQUFPO0FBQUEsVUFDYixPQUFPLEVBQUUsT0FBTztBQUFBLFVBQ2hCLFdBQVcsRUFBRSxRQUFRO0FBQUEsUUFDdEIsQ0FBQztBQUFBLE1BQ0Y7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBQ0EsWUFBWTtBQUVYLFdBQU87QUFBQSxNQUNOLFNBQVM7QUFBQSxRQUNSO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixNQUFNLEdBQUcsTUFBTSxNQUFNO0FBQUEsUUFDdEI7QUFBQSxNQUNEO0FBQUEsTUFDQSxtQkFBbUI7QUFBQSxRQUNsQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBQ0E7QUFBQSxJQUNDLEtBQUssQ0FBQyxFQUFFLFdBQVcsTUFDbEIsdUJBQUMsU0FDQTtBQUFBLDZCQUFDLFFBQUcsZ0NBQUo7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQUFvQjtBQUFBLE1BQ3BCLHVCQUFDLE9BQUU7QUFBQTtBQUFBLFFBQVMsWUFBWSxNQUFNO0FBQUEsUUFBTztBQUFBLFdBQXJDO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFBc0Q7QUFBQSxNQUN0RCx1QkFBQyxRQUNDLHNCQUFZLE1BQU0sSUFBSSxDQUFDLFNBQ3ZCLHVCQUFDLFFBQ0M7QUFBQSxhQUFLO0FBQUEsUUFBTTtBQUFBLFFBQUksS0FBSyxZQUFZLGNBQWM7QUFBQSxXQUR2QyxLQUFLLElBQWQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQUVBLENBQ0EsS0FMRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBTUE7QUFBQSxTQVREO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FVQTtBQUFBLEVBRUY7QUFDRDsiLCJuYW1lcyI6W119"
`;

exports[`npm run dev > should respond to /tools/get.tsx 1`] = `
"<!doctype html><html><body>
<div id="app"></div>
<script type="module" src="/src/tools/get.tsx"></script>"
`;
